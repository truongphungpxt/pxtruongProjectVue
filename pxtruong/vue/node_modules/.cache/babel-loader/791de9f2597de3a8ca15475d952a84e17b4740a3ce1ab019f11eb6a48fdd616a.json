{"ast":null,"code":"import preventEnvent from \"../../../js/preventEventDefault\";\nimport Minput from \"@/components/base/Minput.vue\";\nimport MinputNumber from \"@/components/base/MInputNumber.vue\";\nimport MDropdown from \"@/components/base/MDropdown.vue\";\nimport MDatapicker from \"@/components/base/MDatapicker.vue\";\nimport resource from \"@/js/resource/resource\";\nexport default {\n  components: {\n    Minput,\n    MDropdown,\n    MDatapicker,\n    MinputNumber\n  },\n  props: {\n    pelf: null,\n    formMode: null\n  },\n  created() {\n    this.pelftDefault = JSON.stringify(this.pelf);\n    this.pelftDefault = JSON.parse(this.pelftDefault);\n    this.pelfInput = this.pelf;\n    if (this.formMode == this.$_MFormMode.FixAsset) {\n      this.popupTitle = resource.FormModeTitle.FixAsset;\n    } else if (this.formMode == this.$_MFormMode.AddAsset) {\n      this.popupTitle = resource.FormModeTitle.AddAsset;\n    }\n    console.log(this.pelfInput);\n    console.log(this.formMode);\n    this.atrophyYear = this.pelfInput.Cost * this.pelfInput.DepreciationRate / 100;\n  },\n  methods: {\n    /**\r\n     * đóng form chi tiết tài sản \r\n     * Author: PXTRUONG, Create: 24/3/2023\r\n     */\n    btnClose() {\n      this.$emit(\"hiddePolfDetail\");\n    },\n    /**\r\n     * Author:PXTRUONG(31/5/2023)\r\n     * Thực hiện lưu và đóng form \r\n     */\n    btnSave() {\n      this.btnClose();\n    },\n    /**\r\n     * Author:PXTRUONG(31/5/2023)\r\n     * Đống form và không lưu lại dữ liệu \r\n     */\n    btnCloseUnSave() {\n      this.$emit(\"update:pelf\", this.pelftDefault);\n      console.log(this.pelftDefault);\n    },\n    /**\r\n     * \r\n     * Author:PXTRUONG(31/5/2023)\r\n     * thay đổi dữ liệu phụ thuộc khi thay đổi mã tài sản,loại tài sản \r\n     */\n    async bindData(api, value, protext) {\n      console.log(protext);\n      let option = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        }\n      };\n      await fetch(api + \"?recodeCode=\" + value, option).then(res => res.json()).then(data => {\n        data.forEach(element => {\n          if (protext == \"DepartmentCode\") {\n            this.department = element;\n            console.log(\"DepartmentCode\", this.department);\n          } else if (protext == \"FixedAssetCategoryCode\") {\n            this.fixedAssetCategory = element;\n            console.log(\"FixedAssetCategoryCode\", this.fixedAssetCategory);\n          }\n        });\n      });\n    }\n  },\n  data() {\n    return {\n      pelfInput: {},\n      pelftDefault: {},\n      listDepartment: [],\n      popupTitle: null,\n      atrophyYear: null,\n      department: [],\n      fixedAssetCategory: []\n    };\n  }\n};","map":{"version":3,"names":["preventEnvent","Minput","MinputNumber","MDropdown","MDatapicker","resource","components","props","pelf","formMode","created","pelftDefault","JSON","stringify","parse","pelfInput","$_MFormMode","FixAsset","popupTitle","FormModeTitle","AddAsset","console","log","atrophyYear","Cost","DepreciationRate","methods","btnClose","$emit","btnSave","btnCloseUnSave","bindData","api","value","protext","option","method","headers","fetch","then","res","json","data","forEach","element","department","fixedAssetCategory","listDepartment"],"sources":["C:\\Users\\Admin\\Desktop\\Web-04-PXTRUONG\\web-04-vue\\web202304\\pxtruong\\vue\\src\\components\\view\\pelf\\PelfDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"body__popup\" id=\"detailEmployee\" tabindex=\"-1\" @keydown.ctrl.s=\"thu\">\r\n        <div class=\"popup\">\r\n            <div class=\"popup__body\">\r\n                <div class=\"popup__body__header\">\r\n                    <p class=\"popup__font--bold\">{{ popupTitle }}\r\n                    </p>\r\n                    <div class=\"icon popup__icon--cancal\" @click=\"btnClose\"></div>\r\n                </div>\r\n\r\n                <div class=\"popup__body__container\">\r\n                    <div class=\"popup__body__container--left\">\r\n\r\n                        <minput input-content=\"Mã tài sản\" :is-input-number=\"false\" :is-not-allow-null=\"true\"\r\n                            :is-focus=\"true\" :is-nomal-input=\"true\" v-model=\"pelfInput.FixedAssetCode\">\r\n\r\n                        </minput>\r\n\r\n                        <m-dropdown label-content=\"Mã bộ phận sử dụng \" :is-not-allow-null=\"true\" prop-text=\"DepartmentCode\"\r\n                            api=\"https://localhost:7128/api/v1/Departments\" v-model=\"pelfInput.DepartmentCode\"\r\n                            @sendData=\"bindData\">\r\n\r\n                        </m-dropdown>\r\n                        <m-dropdown label-content=\" Mã loại tài sản \" :is-not-allow-null=\"true\" prop-text=\"FixedAssetCategoryCode\"\r\n                            api=\"https://localhost:7128/api/v1/FixedAssetCategorys\" v-model=\"pelfInput.FixedAssetCategoryCode\"  @sendData=\"bindData\">\r\n\r\n                        </m-dropdown>\r\n                        <minput-number input-content=\"Số lượng\" :is-input-number=\"true\" :is-not-allow-null=\"true\"\r\n                            :is-padding-right=\"true\" v-model=\"pelfInput.Quantity\">\r\n\r\n                        </minput-number>\r\n                        <minput-number input-content=\"Tỷ lệ hao mòn(%)\" :is-input-number=\"true\" :is-not-allow-null=\"true\"\r\n                            :is-padding-right=\"true\" v-model=\"pelfInput.DepreciationRate\">\r\n\r\n                        </minput-number>\r\n                        <m-datapicker input-content=\"Ngày mua \" :is-not-allow-null=\"true\"\r\n                            v-model=\"pelfInput.PurchaseDate\"></m-datapicker>\r\n\r\n\r\n                    </div>\r\n                    <div class=\"popup__body__container--right\">\r\n                        <minput input-content=\"Tên tài sản \" :is-not-allow-null=\"true\" v-model=\"pelfInput.FixedAssetName\"\r\n                            :is-nomal-input=\"true\">\r\n\r\n                        </minput>\r\n                        <minput input-content=\"Tên phòng ban \" :is-input-number=\"false\" :is-not-allow-null=\"true\"\r\n                            :is-disable=\"true\" v-model=\"pelfInput.DepartmentName\">\r\n\r\n                        </minput>\r\n                        <minput input-content=\"Tên loại tài sản \" :is-input-number=\"false\" :is-not-allow-null=\"true\"\r\n                            :is-disable=\"true\" v-model=\"pelfInput.FixedAssetCategoryName\">\r\n\r\n                        </minput>\r\n                        <div class=\"input__container \">\r\n\r\n                            <div class=\"input__content--flex\">\r\n                                <minput-number input-content=\"Nguyên giá\" :is-input-number=\"false\" :is-not-allow-null=\"true\"\r\n                                    :is-padding-right=\"true\" v-model=\"pelfInput.Cost\">\r\n\r\n                                </minput-number>\r\n\r\n                                <minput-number input-content=\"Số năm sử dụng \" :is-input-number=\"false\"\r\n                                    :is-not-allow-null=\"true\" :is-padding-right=\"true\" v-model=\"pelfInput.LifeTime\">\r\n\r\n                                </minput-number>\r\n\r\n\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"input__container \">\r\n\r\n                            <div class=\"input__content--flex\">\r\n                                <minput-number input-content=\" Giá trị hao mòn năm \" :is-input-number=\"false\"\r\n                                    :is-not-allow-null=\"true\" :is-padding-right=\"true\" v-model=\"this.atrophyYear\">\r\n\r\n                                </minput-number>\r\n                                <minput-number input-content=\" Năm theo dõi  \" :is-input-number=\"false\"\r\n                                    :is-not-allow-null=\"true\" :is-disable-and-padding-right=\"true\"\r\n                                    v-model=\"pelfInput.TrackedYear\">\r\n\r\n                                </minput-number>\r\n\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"input__container \">\r\n\r\n                            <div class=\"input__content--flex\">\r\n                                <m-datapicker input-content=\"Ngày bắt đầu sử dụng \" :is-not-allow-null=\"true\"\r\n                                    v-model=\"pelfInput.PurchaseDate\"></m-datapicker>\r\n\r\n\r\n                                <div class=\"input__container\"></div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n\r\n            <div class=\"popup__pooter\">\r\n                <button class=\"button button--white\" @click=\"btnCloseUnSave\"> Hủy</button>\r\n                <button class=\"button button--blue\" @click=\"btnSave\">Lưu</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport preventEnvent from \"../../../js/preventEventDefault\"\r\nimport Minput from \"@/components/base/Minput.vue\";\r\nimport MinputNumber from \"@/components/base/MInputNumber.vue\";\r\nimport MDropdown from \"@/components/base/MDropdown.vue\";\r\nimport MDatapicker from \"@/components/base/MDatapicker.vue\";\r\nimport resource from \"@/js/resource/resource\";\r\nexport default {\r\n    components: { Minput, MDropdown, MDatapicker, MinputNumber },\r\n    props: {\r\n        pelf: null,\r\n        formMode: null\r\n\r\n    },\r\n    created() {\r\n\r\n        this.pelftDefault = JSON.stringify(this.pelf);\r\n        this.pelftDefault = JSON.parse(this.pelftDefault);\r\n        this.pelfInput = this.pelf;\r\n        if (this.formMode == this.$_MFormMode.FixAsset) {\r\n            this.popupTitle = resource.FormModeTitle.FixAsset\r\n        }\r\n        else if (this.formMode == this.$_MFormMode.AddAsset) {\r\n            this.popupTitle = resource.FormModeTitle.AddAsset\r\n        }\r\n        console.log(this.pelfInput);\r\n        console.log(this.formMode);\r\n        this.atrophyYear = this.pelfInput.Cost * this.pelfInput.DepreciationRate / 100;\r\n\r\n    },\r\n    methods: {\r\n        /**\r\n         * đóng form chi tiết tài sản \r\n         * Author: PXTRUONG, Create: 24/3/2023\r\n         */\r\n        btnClose() {\r\n            this.$emit(\"hiddePolfDetail\");\r\n        },\r\n        /**\r\n         * Author:PXTRUONG(31/5/2023)\r\n         * Thực hiện lưu và đóng form \r\n         */\r\n        btnSave() {\r\n            this.btnClose();\r\n\r\n        },\r\n        /**\r\n         * Author:PXTRUONG(31/5/2023)\r\n         * Đống form và không lưu lại dữ liệu \r\n         */\r\n        btnCloseUnSave() {\r\n\r\n            this.$emit(\"update:pelf\", this.pelftDefault);\r\n            console.log(this.pelftDefault);\r\n\r\n        },\r\n        /**\r\n         * \r\n         * Author:PXTRUONG(31/5/2023)\r\n         * thay đổi dữ liệu phụ thuộc khi thay đổi mã tài sản,loại tài sản \r\n         */\r\n        async bindData(api,value,protext) {\r\n            console.log(protext);\r\n            let option = {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type':\r\n                        'application/json;charset=utf-8'\r\n                },\r\n            };\r\n            await fetch(api + \"?recodeCode=\" +value,option)\r\n                .then((res) => res.json())\r\n                .then((data) => {\r\n                    data.forEach(element => {\r\n                        if(protext==\"DepartmentCode\"){\r\n                            this.department=element;\r\n                            console.log(\"DepartmentCode\", this.department);\r\n                        }\r\n                        else if(protext==\"FixedAssetCategoryCode\"){\r\n                            this.fixedAssetCategory=element;\r\n                            console.log(\"FixedAssetCategoryCode\", this.fixedAssetCategory);\r\n                        }\r\n                        \r\n                    });\r\n                    \r\n                });\r\n\r\n\r\n        }\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            pelfInput: {},\r\n            pelftDefault: {},\r\n            listDepartment: [],\r\n            popupTitle: null,\r\n            atrophyYear: null,\r\n            department:[],\r\n            fixedAssetCategory:[]\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style>\r\n@import url(../../../style/base/popup.css);\r\n@import url(../../../style/base/textfield.css);\r\n@import url(../../../style/base/icon.css);\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}