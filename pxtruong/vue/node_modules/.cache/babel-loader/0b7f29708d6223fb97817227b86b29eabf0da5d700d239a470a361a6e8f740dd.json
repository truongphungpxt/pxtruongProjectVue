{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-0693bd17\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"body__header\"\n};\nconst _hoisted_2 = {\n  class: \"body__header--left\"\n};\nconst _hoisted_3 = {\n  class: \"body__header--leftcontainer\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon body__icon--search\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"body__header--leftcontainer\"\n};\nconst _hoisted_6 = {\n  class: \"body__header--leftcontainer\"\n};\nconst _hoisted_7 = {\n  class: \"body__header--right\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon body__header--iconexcel icon__boxshadow\",\n  title: \"Xuất excel\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_m_dropdown = _resolveComponent(\"m-dropdown\");\n  const _component_list_pelf = _resolveComponent(\"list-pelf\");\n  const _component_m_alert = _resolveComponent(\"m-alert\");\n  const _component_pelf_detail = _resolveComponent(\"pelf-detail\");\n  const _component_m_notification = _resolveComponent(\"m-notification\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"body\", {\n      'resize__body': $data.isResize\n    }])\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input__field input__padding--30px\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.dataSearch = $event),\n    placeholder: \"Tìm kiếm tài sản \"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.dataSearch]])]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_m_dropdown, {\n    \"icon-dropdown\": \"body__icon--filter\",\n    \"is-show-error\": false,\n    api: this.$_MApi.fixedAssetCategory.api,\n    \"prop-text\": \"FixedAssetCategoryName\"\n  }, null, 8 /* PROPS */, [\"api\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_m_dropdown, {\n    \"icon-dropdown\": \"body__icon--filter\",\n    \"is-show-error\": false,\n    api: this.$_MApi.department.api,\n    \"prop-text\": \"DepartmentName\"\n  }, null, 8 /* PROPS */, [\"api\"])])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    class: \"button button--blue button__icon button__icon--plus\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.showPelfDetail({}, this.$_MFormMode.AddAsset))\n  }, \" Thêm tài sản \"), _hoisted_8, _createElementVNode(\"div\", {\n    class: \"icon body__header--icondelete icon__boxshadow\",\n    title: \"Xóa hết \",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.showDeleteMuntiple && $options.showDeleteMuntiple(...args))\n  })])]), _createVNode(_component_list_pelf, {\n    onShowDetail: $options.showPelfDetail,\n    \"is-delete-sucess\": this.isDeleteStatus,\n    onRestartDeleteStatus: _cache[3] || (_cache[3] = $event => this.isDeleteStatus = false)\n  }, null, 8 /* PROPS */, [\"onShowDetail\", \"is-delete-sucess\"])], 2 /* CLASS */), $data.isShowAlert ? (_openBlock(), _createBlock(_component_m_alert, {\n    key: 0,\n    \"is-delete\": true,\n    \"list-delete\": this.listDelete,\n    onClose: $options.closeAlert\n  }, null, 8 /* PROPS */, [\"list-delete\", \"onClose\"])) : _createCommentVNode(\"v-if\", true), this.isShow ? (_openBlock(), _createBlock(_component_pelf_detail, {\n    key: 1,\n    onHiddePolfDetail: $options.closePelfDetail,\n    pelf: this.pelfDetail,\n    formMode: this.fromMode\n  }, null, 8 /* PROPS */, [\"onHiddePolfDetail\", \"pelf\", \"formMode\"])) : _createCommentVNode(\"v-if\", true), this.isShowInform ? (_openBlock(), _createBlock(_component_m_notification, {\n    key: 2,\n    informStatus: this.informStatus,\n    informContent: this.informContent\n  }, null, 8 /* PROPS */, [\"informStatus\", \"informContent\"])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","title","_normalizeClass","$data","isResize","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","dataSearch","$event","placeholder","_hoisted_5","_createVNode","_component_m_dropdown","api","$_MApi","fixedAssetCategory","_hoisted_6","department","_hoisted_7","onClick","_cache","$options","showPelfDetail","$_MFormMode","AddAsset","_hoisted_8","args","showDeleteMuntiple","_component_list_pelf","onShowDetail","isDeleteStatus","onRestartDeleteStatus","isShowAlert","_createBlock","_component_m_alert","listDelete","onClose","closeAlert","isShow","_component_pelf_detail","onHiddePolfDetail","closePelfDetail","pelf","pelfDetail","formMode","fromMode","isShowInform","_component_m_notification","informStatus","informContent"],"sources":["C:\\Users\\Admin\\Desktop\\Web-04-PXTRUONG\\web-04-vue\\web202304\\pxtruong\\vue\\src\\components\\view\\pelf\\PelfBody.vue"],"sourcesContent":["<template>\r\n    <div class=\"body\" :class=\"{ 'resize__body': isResize }\">\r\n        <div class=\"body__header\">\r\n            <div class=\"body__header--left\">\r\n\r\n\r\n                <div class=\"body__header--leftcontainer\">\r\n                    <div class=\"icon body__icon--search\"> </div>\r\n                    <input class=\"input__field  input__padding--30px \" v-model=\"dataSearch\" placeholder=\"Tìm kiếm tài sản \">\r\n                </div>\r\n                <div class=\"body__header--leftcontainer\">\r\n                    <m-dropdown icon-dropdown=\"body__icon--filter\" :is-show-error=\"false\"\r\n                        :api=this.$_MApi.fixedAssetCategory.api prop-text=\"FixedAssetCategoryName\"></m-dropdown>\r\n                </div>\r\n                <div class=\"body__header--leftcontainer\">\r\n                    <m-dropdown icon-dropdown=\"body__icon--filter\" :is-show-error=\"false\" :api=this.$_MApi.department.api\r\n                        prop-text=\"DepartmentName\"></m-dropdown>\r\n                </div>\r\n            </div>\r\n            <div class=\"body__header--right\">\r\n                <button class=\" button button--blue button__icon button__icon--plus\"\r\n                    @click=\"showPelfDetail({}, this.$_MFormMode.AddAsset)\">\r\n                    Thêm tài sản\r\n                </button>\r\n                <div class=\"icon body__header--iconexcel icon__boxshadow\" title=\"Xuất excel\"></div>\r\n                <div class=\"icon body__header--icondelete icon__boxshadow\" title=\"Xóa hết \" @click=\"showDeleteMuntiple\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <list-pelf @showDetail=\"showPelfDetail\" :is-delete-sucess=\"this.isDeleteStatus\"\r\n            @restartDeleteStatus=\"this.isDeleteStatus = false\"></list-pelf>\r\n    </div>\r\n    <m-alert v-if=\"isShowAlert\" :is-delete=\"true\" :list-delete=\"this.listDelete\" @close=\"closeAlert\">\r\n\r\n    </m-alert>\r\n    <pelf-detail v-if=\"this.isShow\" @hiddePolfDetail=\"closePelfDetail\" :pelf=\"this.pelfDetail\" :formMode=\"this.fromMode\">\r\n    </pelf-detail>\r\n    <m-notification :informStatus=\"this.informStatus\" v-if=\"this.isShowInform\"\r\n        :informContent=\"this.informContent\"></m-notification>\r\n</template>\r\n<script>\r\nimport PelfDetail from '../../view/pelf/PelfDetail.vue';\r\nimport pelfApi from '@/config/pelf/pelfapi';\r\nimport ListPelf from '../../view/pelf/ListPelf.vue';\r\nimport MDropdown from '@/components/base/MDropdown.vue';\r\nimport MAlert from '@/components/base/MAlert.vue';\r\nimport MNotification from '@/components/base/MNotification.vue';\r\n\r\nimport { debounce } from 'lodash';\r\nexport default {\r\n    components: {\r\n        PelfDetail,\r\n        ListPelf,\r\n        MDropdown,\r\n        MAlert,\r\n        MNotification\r\n\r\n    },\r\n    watch: {\r\n        dataSearch: function (newValue) {\r\n\r\n            this.debouncedWatch(newValue);\r\n        },\r\n        contextMenuStatus: function (newValue) {\r\n            this.actionContextMenu(newValue);\r\n        },\r\n    },\r\n    created() {\r\n        this.$eventBus.on(\"isResize\", (data) => {\r\n            this.isResize = data\r\n        });\r\n        //lấy danh sách cần xóa \r\n        this.$eventBus.on(\"listCodeDelete\", (data) => {\r\n            this.listDelete = data;\r\n        });\r\n        this.debouncedWatch = debounce((newValue, oldValue) => {\r\n            this.$eventBus.emit(\"dataSearch\", newValue);\r\n        }, 1000);\r\n        this.$eventBus.on(\"contextMenuStatus\", (data) => {\r\n            this.contextMenuStatus = data;\r\n        });\r\n\r\n    },\r\n    beforeUnmount() {\r\n        this.debouncedWatch.cancel();\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n        * Author:PXTRUONG(25/6/2023)\r\n        * Thực hiện chức năng của context theo trạng thái action\r\n        * @param {trạng thái muốn thực hiên:thêm,sửa.xóa} status \r\n        */\r\n        actionContextMenu(status) {\r\n            switch (status) {\r\n                case this.$_MContextStatus.IsAdd:\r\n                    this.showPelfDetail({}, this.$_MFormMode.AddAsset)\r\n                    break;\r\n                case this.$_MContextStatus.IsDelete:\r\n                      this.showDeleteMuntiple();\r\n                    break;\r\n                case this.$_MContextStatus.IsFixed:\r\n                    console.log(\"sưa\");\r\n                    this.$emit(\"showDetail\", this.peltSellected, this.$_MFormMode.FixAsset);\r\n                    this.$eventBus.emit(\"contextMenuStatus\", null);\r\n                    break;\r\n                case this.$_MContextStatus.IsDuplicate:\r\n                    this.$emit(\"showDetail\", this.peltSellected, this.$_MFormMode.AddAsset);\r\n                    this.$eventBus.emit(\"contextMenuStatus\", null);\r\n                    break;\r\n\r\n\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * đóng cảnh báo  \r\n         * thực hiện xóa nhiều \r\n         * Author:PXTRUONG(24/05/2023)\r\n         */\r\n        async closeAlert(isAllowDelete) {\r\n            try {\r\n                var listData = [];\r\n\r\n                if (isAllowDelete) {\r\n\r\n\r\n                    this.listDelete.forEach(element => {\r\n                        listData.push({ \"recodecode\": element })\r\n                    });\r\n                    listData = JSON.stringify(listData);\r\n                    console.log(listData);\r\n                    await fetch(pelfApi.fixedAsset.api + \"?RecordCode=\" + listData, {\r\n                        method: 'DELETE',\r\n                    })\r\n                        .then((res) => res.json())\r\n                        .then((data) => {\r\n                            console.log(data.IsSuccess);\r\n                            if (data.IsSuccess) {\r\n                                this.isDeleteStatus = true\r\n                                this.isShowAlert = false\r\n                                this.showInform(data.IsSuccess, this.$_MInformStatus.IsSucess, this.$_MResource.InformContent.DeleteSucess)\r\n                            }\r\n                        });\r\n\r\n\r\n                }\r\n                this.isShowAlert = false\r\n            } catch (error) {\r\n            }\r\n        },\r\n        /**\r\n         * Author:PXTRUONG(19/6/2023)\r\n         * Thực hiện đóng mở thông báo chuyền nội dung thông báo \r\n         */\r\n        showInform(isShow, informStatus, content) {\r\n            this.isShowInform = isShow;\r\n            this.informStatus = informStatus;\r\n            this.informContent = content;\r\n            setTimeout(() => this.isShowInform = false, 4000);\r\n        },\r\n        /**\r\n          * hiện chi tiết tài sản \r\n          * Author:PXTRUONG(24/05/2023)\r\n          */\r\n        showPelfDetail(data, formMode) {\r\n            this.fromMode = formMode\r\n            this.pelfDetail = data;\r\n            this.isShow = true;\r\n        },\r\n        /**\r\n         * đóng chi tiết tài sản \r\n         * Author:PXTRUONG(24/05/2023)\r\n         */\r\n        closePelfDetail(showInform, result, content) {\r\n            if (showInform) {\r\n                this.showInform(showInform, result, content);\r\n            }\r\n            this.isShow = false;\r\n        },\r\n        /**\r\n         * Author:PXTRUONG(6/6/2023)\r\n         * thực hiện xóa nhiều \r\n         */\r\n        showDeleteMuntiple() {\r\n            this.isShowAlert = true\r\n            console.log(this.listDelete);\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            dataInput: [],\r\n            isShow: false,\r\n            pelfDetail: null,\r\n            isResize: false,\r\n            listDelete: [],\r\n            isShowAlert: false,\r\n            fromMode: null,\r\n            informStatus: null,\r\n            isShowInform: false,\r\n            informContent: null,\r\n            isDeleteStatus: Boolean,\r\n            dataSearch: null,\r\n            contextMenuStatus: null\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style scoped>\r\n@import url(../../../style/base/textfield.css);\r\n@import url(../../../style/base/icon.css);\r\n@import url(../../../style/base/button.css);\r\n@import url(../../../style/base/table.css);\r\n\r\n.resize__body {\r\n    width: calc(100% - 68px);\r\n}\r\n</style>"],"mappings":";;;EAEaA,KAAK,EAAC;AAAc;;EAChBA,KAAK,EAAC;AAAoB;;EAGtBA,KAAK,EAAC;AAA6B;gEACpCC,mBAAA,CAA4C;EAAvCD,KAAK,EAAC;AAAyB;;EAGnCA,KAAK,EAAC;AAA6B;;EAInCA,KAAK,EAAC;AAA6B;;EAKvCA,KAAK,EAAC;AAAqB;gEAK5BC,mBAAA,CAAmF;EAA9ED,KAAK,EAAC,8CAA8C;EAACE,KAAK,EAAC;;;;;;;;;6DAvB5ED,mBAAA,CA+BM;IA/BDD,KAAK,EAAAG,eAAA,EAAC,MAAM;MAAA,gBAA2BC,KAAA,CAAAC;IAAQ;MAChDJ,mBAAA,CA0BM,OA1BNK,UA0BM,GAzBFL,mBAAA,CAeM,OAfNM,UAeM,GAZFN,mBAAA,CAGM,OAHNO,UAGM,GAFFC,UAA4C,E,gBAC5CR,mBAAA,CAAwG;IAAjGD,KAAK,EAAC,mCAAqC;+DAAUI,KAAA,CAAAM,UAAU,GAAAC,MAAA;IAAEC,WAAW,EAAC;iDAAxBR,KAAA,CAAAM,UAAU,E,KAE1ET,mBAAA,CAGM,OAHNY,UAGM,GAFFC,YAAA,CAC4FC,qBAAA;IADhF,eAAa,EAAC,oBAAoB;IAAE,eAAa,EAAE,KAAK;IAC/DC,GAAG,OAAMC,MAAM,CAACC,kBAAkB,CAACF,GAAG;IAAC,WAAS,EAAC;sCAE1Df,mBAAA,CAGM,OAHNkB,UAGM,GAFFL,YAAA,CAC4CC,qBAAA;IADhC,eAAa,EAAC,oBAAoB;IAAE,eAAa,EAAE,KAAK;IAAGC,GAAG,OAAMC,MAAM,CAACG,UAAU,CAACJ,GAAG;IACjG,WAAS,EAAC;wCAGtBf,mBAAA,CAQM,OARNoB,UAQM,GAPFpB,mBAAA,CAGS;IAHDD,KAAK,EAAC,qDAAsD;IAC/DsB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAZ,MAAA,IAAEa,QAAA,CAAAC,cAAc,UAAUC,WAAW,CAACC,QAAQ;KAAG,gBAE3D,GACAC,UAAmF,EACnF3B,mBAAA,CACM;IADDD,KAAK,EAAC,+CAA+C;IAACE,KAAK,EAAC,UAAU;IAAEoB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAM,IAAA,KAAEL,QAAA,CAAAM,kBAAA,IAAAN,QAAA,CAAAM,kBAAA,IAAAD,IAAA,CAAkB;UAK9Gf,YAAA,CACmEiB,oBAAA;IADvDC,YAAU,EAAER,QAAA,CAAAC,cAAc;IAAG,kBAAgB,OAAOQ,cAAc;IACzEC,qBAAmB,EAAAX,MAAA,QAAAA,MAAA,MAAAZ,MAAA,SAAOsB,cAAc;kFAElC7B,KAAA,CAAA+B,WAAW,I,cAA1BC,YAAA,CAEUC,kBAAA;;IAFmB,WAAS,EAAE,IAAI;IAAG,aAAW,OAAOC,UAAU;IAAGC,OAAK,EAAEf,QAAA,CAAAgB;iGAG7DC,MAAM,I,cAA9BL,YAAA,CACcM,sBAAA;;IADmBC,iBAAe,EAAEnB,QAAA,CAAAoB,eAAe;IAAGC,IAAI,OAAOC,UAAU;IAAGC,QAAQ,OAAOC;gHAE9CC,YAAY,I,cAAzEb,YAAA,CACyDc,yBAAA;;IADxCC,YAAY,OAAOA,YAAY;IAC3CC,aAAa,OAAOA"},"metadata":{},"sourceType":"module","externalDependencies":[]}